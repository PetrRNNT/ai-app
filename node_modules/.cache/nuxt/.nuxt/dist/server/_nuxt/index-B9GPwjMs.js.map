{"version":3,"file":"index-B9GPwjMs.js","sources":["../../../../../../../composables/useSettings.ts","../../../../../../../pages/settings/index.vue"],"sourcesContent":["import { useSettingsStore } from '~/stores/settings'\n\nexport function useSettings() {\n  const settingsStore = useSettingsStore()\n\n  const fetchSettings = async () => {\n    return settingsStore.fetchSettings()\n  }\n\n  const updateSettings = async (data: any) => {\n    return settingsStore.updateSettings(data)\n  }\n\n  return {\n    settings: computed(() => settingsStore.settings),\n    theme: computed(() => settingsStore.theme),\n    language: computed(() => settingsStore.language),\n    pomodoroSettings: computed(() => settingsStore.pomodoroSettings),\n    loading: computed(() => settingsStore.loading),\n    error: computed(() => settingsStore.error),\n    fetchSettings,\n    updateSettings,\n  }\n}\n","<template>\n  <div class=\"min-h-screen bg-gray-50\">\n    <!-- Header -->\n    <header class=\"bg-white shadow-sm border-b\">\n      <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div class=\"flex justify-between items-center h-16\">\n          <div class=\"flex items-center space-x-4\">\n            <NuxtLink to=\"/\" class=\"text-blue-600 hover:underline\">← Назад</NuxtLink>\n            <h1 class=\"text-xl font-bold text-gray-900\">Настройки</h1>\n          </div>\n\n          <div class=\"flex items-center space-x-4\">\n            <span v-if=\"user\" class=\"text-sm text-gray-600\">{{ user.name }}</span>\n            <button @click=\"handleLogout\" class=\"text-sm text-gray-600 hover:text-gray-900\">\n              Выйти\n            </button>\n          </div>\n        </div>\n      </div>\n    </header>\n\n    <!-- Main Content -->\n    <main class=\"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n      <div v-if=\"loading\" class=\"flex justify-center items-center h-64\">\n        <div class=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n      </div>\n\n      <div v-else class=\"space-y-6\">\n        <!-- Profile Section -->\n        <div class=\"card\">\n          <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">Профиль</h2>\n          <div class=\"space-y-4\">\n            <div>\n              <label class=\"block text-sm font-medium text-gray-700 mb-1\">Имя</label>\n              <input\n                v-model=\"form.name\"\n                type=\"text\"\n                class=\"input-base\"\n                @change=\"saveSettings\"\n              />\n            </div>\n            <div>\n              <label class=\"block text-sm font-medium text-gray-700 mb-1\">Email</label>\n              <input\n                :value=\"user?.email\"\n                type=\"email\"\n                class=\"input-base bg-gray-100\"\n                disabled\n              />\n            </div>\n          </div>\n        </div>\n\n        <!-- Appearance -->\n        <div class=\"card\">\n          <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">Внешний вид</h2>\n          <div class=\"space-y-4\">\n            <div>\n              <label class=\"block text-sm font-medium text-gray-700 mb-2\">Тема</label>\n              <select v-model=\"form.theme\" class=\"input-base\" @change=\"saveSettings\">\n                <option value=\"system\">Системная</option>\n                <option value=\"light\">Светлая</option>\n                <option value=\"dark\">Тёмная</option>\n              </select>\n            </div>\n          </div>\n        </div>\n\n        <!-- Regional -->\n        <div class=\"card\">\n          <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">Региональные настройки</h2>\n          <div class=\"space-y-4\">\n            <div>\n              <label class=\"block text-sm font-medium text-gray-700 mb-1\">Язык</label>\n              <select v-model=\"form.language\" class=\"input-base\" @change=\"saveSettings\">\n                <option value=\"ru\">Русский</option>\n                <option value=\"en\">English</option>\n              </select>\n            </div>\n            <div>\n              <label class=\"block text-sm font-medium text-gray-700 mb-1\">Часовой пояс</label>\n              <select v-model=\"form.timezone\" class=\"input-base\" @change=\"saveSettings\">\n                <option value=\"Europe/Kaliningrad\">Калининград (UTC+2)</option>\n                <option value=\"Europe/Moscow\">Москва (UTC+3)</option>\n                <option value=\"Europe/Samara\">Самара (UTC+4)</option>\n                <option value=\"Asia/Yekaterinburg\">Екатеринбург (UTC+5)</option>\n                <option value=\"Asia/Omsk\">Омск (UTC+6)</option>\n                <option value=\"Asia/Krasnoyarsk\">Красноярск (UTC+7)</option>\n                <option value=\"Asia/Irkutsk\">Иркутск (UTC+8)</option>\n                <option value=\"Asia/Yakutsk\">Якутск (UTC+9)</option>\n                <option value=\"Asia/Vladivostok\">Владивосток (UTC+10)</option>\n                <option value=\"Asia/Magadan\">Магадан (UTC+11)</option>\n                <option value=\"Asia/Kamchatka\">Камчатка (UTC+12)</option>\n              </select>\n            </div>\n            <div>\n              <label class=\"block text-sm font-medium text-gray-700 mb-1\">Формат даты</label>\n              <select v-model=\"form.dateFormat\" class=\"input-base\" @change=\"saveSettings\">\n                <option value=\"DD.MM.YYYY\">ДД.ММ.ГГГГ</option>\n                <option value=\"MM/DD/YYYY\">ММ/ДД/ГГГГ</option>\n                <option value=\"YYYY-MM-DD\">ГГГГ-ММ-ДД</option>\n              </select>\n            </div>\n            <div>\n              <label class=\"block text-sm font-medium text-gray-700 mb-1\">Первый день недели</label>\n              <select v-model.number=\"form.weekStart\" class=\"input-base\" @change=\"saveSettings\">\n                <option :value=\"1\">Понедельник</option>\n                <option :value=\"0\">Воскресенье</option>\n              </select>\n            </div>\n          </div>\n        </div>\n\n        <!-- Pomodoro -->\n        <div class=\"card\">\n          <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">Pomodoro таймер</h2>\n          <div class=\"grid grid-cols-3 gap-4\">\n            <div>\n              <label class=\"block text-sm font-medium text-gray-700 mb-1\">Работа (мин)</label>\n              <input\n                v-model.number=\"form.pomodoroWork\"\n                type=\"number\"\n                min=\"1\"\n                max=\"60\"\n                class=\"input-base\"\n                @change=\"saveSettings\"\n              />\n            </div>\n            <div>\n              <label class=\"block text-sm font-medium text-gray-700 mb-1\">Короткий перерыв (мин)</label>\n              <input\n                v-model.number=\"form.pomodoroBreak\"\n                type=\"number\"\n                min=\"1\"\n                max=\"30\"\n                class=\"input-base\"\n                @change=\"saveSettings\"\n              />\n            </div>\n            <div>\n              <label class=\"block text-sm font-medium text-gray-700 mb-1\">Длинный перерыв (мин)</label>\n              <input\n                v-model.number=\"form.pomodoroLong\"\n                type=\"number\"\n                min=\"1\"\n                max=\"60\"\n                class=\"input-base\"\n                @change=\"saveSettings\"\n              />\n            </div>\n          </div>\n        </div>\n\n        <!-- Save Status -->\n        <div v-if=\"saveSuccess\" class=\"text-green-600 text-sm bg-green-50 p-3 rounded\">\n          Настройки сохранены\n        </div>\n        <div v-if=\"saveError\" class=\"text-red-600 text-sm bg-red-50 p-3 rounded\">\n          {{ saveError }}\n        </div>\n      </div>\n    </main>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\ndefinePageMeta({\n  middleware: ['auth'],\n})\n\nconst { user, logout } = useAuth()\nconst { settings, loading, fetchSettings, updateSettings } = useSettings()\n\nconst form = ref({\n  name: user.value?.name || '',\n  theme: 'system',\n  language: 'ru',\n  timezone: 'Europe/Moscow',\n  dateFormat: 'DD.MM.YYYY',\n  timeFormat: '24h',\n  weekStart: 1,\n  pomodoroWork: 25,\n  pomodoroBreak: 5,\n  pomodoroLong: 15,\n})\n\nconst saveSuccess = ref(false)\nconst saveError = ref('')\n\nonMounted(async () => {\n  await fetchSettings()\n  if (settings.value) {\n    form.value = {\n      ...form.value,\n      ...settings.value,\n    }\n  }\n})\n\nconst saveSettings = async () => {\n  saveSuccess.value = false\n  saveError.value = ''\n\n  try {\n    await updateSettings({\n      theme: form.value.theme,\n      language: form.value.language,\n      timezone: form.value.timezone,\n      dateFormat: form.value.dateFormat,\n      weekStart: form.value.weekStart,\n      pomodoroWork: form.value.pomodoroWork,\n      pomodoroBreak: form.value.pomodoroBreak,\n      pomodoroLong: form.value.pomodoroLong,\n    })\n    saveSuccess.value = true\n    setTimeout(() => (saveSuccess.value = false), 3000)\n  } catch (error: any) {\n    saveError.value = error.message\n  }\n}\n\nconst handleLogout = async () => {\n  await logout()\n}\n</script>\n"],"names":["_ssrRenderAttrs","_mergeProps","_push","_parent","_unref","_ssrInterpolate","_ssrRenderAttr","_ssrIncludeBooleanAttr","_ssrLooseContain","_ssrLooseEqual"],"mappings":"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"}