{"file":"useProject-BhyhUoFh.js","mappings":"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","names":[],"sources":["../../../../../../../stores/project.ts","../../../../../../../composables/useProject.ts"],"sourcesContent":["import { defineStore } from 'pinia'\nimport type { ProjectWithRelations, CreateProjectInput, UpdateProjectInput } from '~/types'\n\ninterface ProjectState {\n  projects: ProjectWithRelations[]\n  currentProject: ProjectWithRelations | null\n  loading: boolean\n  error: string | null\n}\n\nexport const useProjectStore = defineStore('project', {\n  state: (): ProjectState => ({\n    projects: [],\n    currentProject: null,\n    loading: false,\n    error: null,\n  }),\n\n  getters: {\n    allProjects: (state) => state.projects,\n    activeProjects: (state) => state.projects.filter((p) => p.status === 'ACTIVE'),\n    archivedProjects: (state) => state.projects.filter((p) => p.status === 'ARCHIVED'),\n  },\n\n  actions: {\n    async fetchProjects() {\n      this.loading = true\n      this.error = null\n\n      try {\n        const authStore = useAuthStore()\n        const token = authStore.validToken\n        if (!token) throw new Error('Not authenticated')\n        \n        const data: any = await $fetch('/api/projects', {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        })\n\n        this.projects = data.data\n      } catch (error: any) {\n        this.error = error.message || 'Failed to fetch projects'\n      } finally {\n        this.loading = false\n      }\n    },\n\n    async fetchProjectById(id: string) {\n      this.loading = true\n      this.error = null\n\n      try {\n        const authStore = useAuthStore()\n        const token = authStore.validToken\n        if (!token) throw new Error('Not authenticated')\n        \n        const data: any = await $fetch(`/api/projects/${id}`, {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        })\n\n        this.currentProject = data.data\n        return data.data\n      } catch (error: any) {\n        this.error = error.message || 'Failed to fetch project'\n        throw error\n      } finally {\n        this.loading = false\n      }\n    },\n\n    async createProject(data: CreateProjectInput) {\n      this.loading = true\n      this.error = null\n\n      try {\n        const authStore = useAuthStore()\n        const token = authStore.validToken\n        if (!token) throw new Error('Not authenticated')\n        \n        const result: any = await $fetch('/api/projects', {\n          method: 'POST',\n          headers: {\n            Authorization: `Bearer ${token}`,\n            'Content-Type': 'application/json',\n          },\n          body: data,\n        })\n\n        this.projects.push(result.data)\n        return result.data\n      } catch (error: any) {\n        this.error = error.message || 'Failed to create project'\n        throw error\n      } finally {\n        this.loading = false\n      }\n    },\n\n    async updateProject(data: UpdateProjectInput) {\n      this.loading = true\n      this.error = null\n\n      try {\n        const authStore = useAuthStore()\n        const token = authStore.validToken\n        if (!token) throw new Error('Not authenticated')\n        \n        const { id, ...updateData } = data\n        const result: any = await $fetch(`/api/projects/${id}`, {\n          method: 'PUT',\n          headers: {\n            Authorization: `Bearer ${token}`,\n            'Content-Type': 'application/json',\n          },\n          body: updateData,\n        })\n\n        const index = this.projects.findIndex((p) => p.id === id)\n        if (index !== -1) {\n          this.projects[index] = result.data\n        }\n\n        if (this.currentProject?.id === id) {\n          this.currentProject = result.data\n        }\n\n        return result.data\n      } catch (error: any) {\n        this.error = error.message || 'Failed to update project'\n        throw error\n      } finally {\n        this.loading = false\n      }\n    },\n\n    async deleteProject(id: string) {\n      this.loading = true\n      this.error = null\n\n      try {\n        const authStore = useAuthStore()\n        const token = authStore.validToken\n        if (!token) throw new Error('Not authenticated')\n        \n        await $fetch(`/api/projects/${id}`, {\n          method: 'DELETE',\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        })\n\n        this.projects = this.projects.filter((p) => p.id !== id)\n      } catch (error: any) {\n        this.error = error.message || 'Failed to delete project'\n        throw error\n      } finally {\n        this.loading = false\n      }\n    },\n  },\n})\n","import { useProjectStore } from '~/stores/project'\nimport type { CreateProjectInput, UpdateProjectInput } from '~/types'\n\nexport function useProject() {\n  const projectStore = useProjectStore()\n\n  const fetchProjects = async () => {\n    return projectStore.fetchProjects()\n  }\n\n  const createProject = async (data: CreateProjectInput) => {\n    return projectStore.createProject(data)\n  }\n\n  const updateProject = async (data: UpdateProjectInput) => {\n    return projectStore.updateProject(data)\n  }\n\n  const deleteProject = async (id: string) => {\n    return projectStore.deleteProject(id)\n  }\n\n  return {\n    projects: computed(() => projectStore.projects),\n    activeProjects: computed(() => projectStore.activeProjects),\n    archivedProjects: computed(() => projectStore.archivedProjects),\n    currentProject: computed(() => projectStore.currentProject),\n    loading: computed(() => projectStore.loading),\n    error: computed(() => projectStore.error),\n    fetchProjects,\n    createProject,\n    updateProject,\n    deleteProject,\n  }\n}\n"],"version":3}