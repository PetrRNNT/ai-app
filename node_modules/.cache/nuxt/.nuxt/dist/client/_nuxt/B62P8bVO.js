import{_ as M}from"./_5kmRz0s.js";import{K as T,E as u,g as A,A as k,j as D,c as d,a as e,b as E,w as B,k as s,t as C,l as f,q as i,v as x,x as p,y as L,o as m,d as F}from"./BAtAs9mt.js";import{u as N}from"./HdmTA0kg.js";function z(){const n=T(),r=async()=>n.fetchSettings(),y=async g=>n.updateSettings(g);return{settings:u(()=>n.settings),theme:u(()=>n.theme),language:u(()=>n.language),pomodoroSettings:u(()=>n.pomodoroSettings),loading:u(()=>n.loading),error:u(()=>n.error),fetchSettings:r,updateSettings:y}}const W={class:"min-h-screen bg-gray-50"},K={class:"bg-white shadow-sm border-b"},j={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},h={class:"flex justify-between items-center h-16"},q={class:"flex items-center space-x-4"},I={class:"flex items-center space-x-4"},O={key:0,class:"text-sm text-gray-600"},P={class:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},G={key:0,class:"flex justify-center items-center h-64"},H={key:1,class:"space-y-6"},J={class:"card"},Q={class:"space-y-4"},R=["value"],X={class:"card"},Z={class:"space-y-4"},$={class:"card"},_={class:"space-y-4"},tt={class:"card"},et={class:"grid grid-cols-3 gap-4"},ot={key:0,class:"text-green-600 text-sm bg-green-50 p-3 rounded"},st={key:1,class:"text-red-600 text-sm bg-red-50 p-3 rounded"},it=A({__name:"index",setup(n){const{user:r,logout:y}=N(),{settings:g,loading:S,fetchSettings:U,updateSettings:w}=z(),o=k({name:r.value?.name||"",theme:"system",language:"ru",timezone:"Europe/Moscow",dateFormat:"DD.MM.YYYY",timeFormat:"24h",weekStart:1,pomodoroWork:25,pomodoroBreak:5,pomodoroLong:15}),v=k(!1),b=k("");D(async()=>{await U(),g.value&&(o.value={...o.value,...g.value})});const l=async()=>{v.value=!1,b.value="";try{await w({theme:o.value.theme,language:o.value.language,timezone:o.value.timezone,dateFormat:o.value.dateFormat,weekStart:o.value.weekStart,pomodoroWork:o.value.pomodoroWork,pomodoroBreak:o.value.pomodoroBreak,pomodoroLong:o.value.pomodoroLong}),v.value=!0,setTimeout(()=>v.value=!1,3e3)}catch(c){b.value=c.message}},Y=async()=>{await y()};return(c,t)=>{const V=M;return m(),d("div",W,[e("header",K,[e("div",j,[e("div",h,[e("div",q,[E(V,{to:"/",class:"text-blue-600 hover:underline"},{default:B(()=>[...t[9]||(t[9]=[F("← Назад",-1)])]),_:1}),t[10]||(t[10]=e("h1",{class:"text-xl font-bold text-gray-900"},"Настройки",-1))]),e("div",I,[s(r)?(m(),d("span",O,C(s(r).name),1)):f("",!0),e("button",{onClick:Y,class:"text-sm text-gray-600 hover:text-gray-900"}," Выйти ")])])])]),e("main",P,[s(S)?(m(),d("div",G,[...t[11]||(t[11]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)])])):(m(),d("div",H,[e("div",J,[t[14]||(t[14]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Профиль",-1)),e("div",Q,[e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Имя",-1)),i(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>s(o).name=a),type:"text",class:"input-base",onChange:l},null,544),[[x,s(o).name]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email",-1)),e("input",{value:s(r)?.email,type:"email",class:"input-base bg-gray-100",disabled:""},null,8,R)])])]),e("div",X,[t[17]||(t[17]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Внешний вид",-1)),e("div",Z,[e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Тема",-1)),i(e("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>s(o).theme=a),class:"input-base",onChange:l},[...t[15]||(t[15]=[e("option",{value:"system"},"Системная",-1),e("option",{value:"light"},"Светлая",-1),e("option",{value:"dark"},"Тёмная",-1)])],544),[[p,s(o).theme]])])])]),e("div",$,[t[26]||(t[26]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Региональные настройки",-1)),e("div",_,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Язык",-1)),i(e("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>s(o).language=a),class:"input-base",onChange:l},[...t[18]||(t[18]=[e("option",{value:"ru"},"Русский",-1),e("option",{value:"en"},"English",-1)])],544),[[p,s(o).language]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Часовой пояс",-1)),i(e("select",{"onUpdate:modelValue":t[3]||(t[3]=a=>s(o).timezone=a),class:"input-base",onChange:l},[...t[20]||(t[20]=[L('<option value="Europe/Kaliningrad">Калининград (UTC+2)</option><option value="Europe/Moscow">Москва (UTC+3)</option><option value="Europe/Samara">Самара (UTC+4)</option><option value="Asia/Yekaterinburg">Екатеринбург (UTC+5)</option><option value="Asia/Omsk">Омск (UTC+6)</option><option value="Asia/Krasnoyarsk">Красноярск (UTC+7)</option><option value="Asia/Irkutsk">Иркутск (UTC+8)</option><option value="Asia/Yakutsk">Якутск (UTC+9)</option><option value="Asia/Vladivostok">Владивосток (UTC+10)</option><option value="Asia/Magadan">Магадан (UTC+11)</option><option value="Asia/Kamchatka">Камчатка (UTC+12)</option>',11)])],544),[[p,s(o).timezone]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Формат даты",-1)),i(e("select",{"onUpdate:modelValue":t[4]||(t[4]=a=>s(o).dateFormat=a),class:"input-base",onChange:l},[...t[22]||(t[22]=[e("option",{value:"DD.MM.YYYY"},"ДД.ММ.ГГГГ",-1),e("option",{value:"MM/DD/YYYY"},"ММ/ДД/ГГГГ",-1),e("option",{value:"YYYY-MM-DD"},"ГГГГ-ММ-ДД",-1)])],544),[[p,s(o).dateFormat]])]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Первый день недели",-1)),i(e("select",{"onUpdate:modelValue":t[5]||(t[5]=a=>s(o).weekStart=a),class:"input-base",onChange:l},[...t[24]||(t[24]=[e("option",{value:1},"Понедельник",-1),e("option",{value:0},"Воскресенье",-1)])],544),[[p,s(o).weekStart,void 0,{number:!0}]])])])]),e("div",tt,[t[30]||(t[30]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Pomodoro таймер",-1)),e("div",et,[e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Работа (мин)",-1)),i(e("input",{"onUpdate:modelValue":t[6]||(t[6]=a=>s(o).pomodoroWork=a),type:"number",min:"1",max:"60",class:"input-base",onChange:l},null,544),[[x,s(o).pomodoroWork,void 0,{number:!0}]])]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Короткий перерыв (мин)",-1)),i(e("input",{"onUpdate:modelValue":t[7]||(t[7]=a=>s(o).pomodoroBreak=a),type:"number",min:"1",max:"30",class:"input-base",onChange:l},null,544),[[x,s(o).pomodoroBreak,void 0,{number:!0}]])]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Длинный перерыв (мин)",-1)),i(e("input",{"onUpdate:modelValue":t[8]||(t[8]=a=>s(o).pomodoroLong=a),type:"number",min:"1",max:"60",class:"input-base",onChange:l},null,544),[[x,s(o).pomodoroLong,void 0,{number:!0}]])])])]),s(v)?(m(),d("div",ot," Настройки сохранены ")):f("",!0),s(b)?(m(),d("div",st,C(s(b)),1)):f("",!0)]))])])}}});export{it as default};
