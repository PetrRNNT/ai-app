import{_ as j}from"./_5kmRz0s.js";import{C as P,D as b,E as x,g as w,j as V,o as r,c as p,a as e,k as l,F as B,r as E,t as g,p as h,n as L,l as v,q as f,v as _,x as K,G as z,A as T,b as k,w as M,d as N}from"./BAtAs9mt.js";import{u as D}from"./HdmTA0kg.js";const O=P("template",{state:()=>({templates:[],loading:!1,error:null}),getters:{taskTemplates:a=>a.templates.filter(s=>s.type==="TASK"),projectTemplates:a=>a.templates.filter(s=>s.type==="PROJECT")},actions:{async fetchTemplates(a){this.loading=!0,this.error=null;try{const s=b(),i=a?`/api/templates?type=${a}`:"/api/templates",c=await $fetch(i,{headers:{Authorization:`Bearer ${s.token}`}});this.templates=c.data}catch(s){this.error=s.message}finally{this.loading=!1}},async createTemplate(a){this.loading=!0,this.error=null;try{const s=b(),i=await $fetch("/api/templates",{method:"POST",headers:{Authorization:`Bearer ${s.token}`,"Content-Type":"application/json"},body:a});return this.templates.push(i.data),i.data}catch(s){throw this.error=s.message,s}finally{this.loading=!1}},async deleteTemplate(a){try{const s=b();await $fetch(`/api/templates/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${s.token}`}}),this.templates=this.templates.filter(i=>i.id!==a)}catch(s){throw this.error=s.message,s}}}});function U(){const a=O(),s=async d=>a.fetchTemplates(d),i=async d=>a.createTemplate(d),c=async d=>a.deleteTemplate(d);return{templates:x(()=>a.templates),taskTemplates:x(()=>a.taskTemplates),projectTemplates:x(()=>a.projectTemplates),loading:x(()=>a.loading),error:x(()=>a.error),fetchTemplates:s,createTemplate:i,deleteTemplate:c}}const q={class:"space-y-4"},F={class:"flex justify-between items-center"},J={key:0,class:"text-center py-8"},R={key:1,class:"text-center py-8 text-gray-500"},G={key:2,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},I=["onClick"],H={class:"flex items-start justify-between mb-2"},Q={class:"font-semibold text-gray-900"},W=["onClick"],X={class:"flex items-center gap-2 text-sm"},Y={key:0,class:"text-green-600 text-xs"},Z={class:"flex items-center gap-2 mb-4"},ee={class:"flex justify-end gap-2"},te=w({__name:"TemplateList",setup(a){const{templates:s,loading:i,fetchTemplates:c,createTemplate:d,deleteTemplate:u}=U(),m=T(!1),n=T({name:"",type:"TASK",description:"",isPublic:!1});V(async()=>{await c()});const $=y=>{console.log("Selected template:",y)},C=async()=>{await d({name:n.value.name,type:n.value.type,content:{title:n.value.name,description:n.value.description},isPublic:n.value.isPublic}),m.value=!1,n.value={name:"",type:"TASK",description:"",isPublic:!1}},S=async y=>{confirm("–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —à–∞–±–ª–æ–Ω?")&&await u(y)};return(y,t)=>(r(),p("div",q,[e("div",F,[t[8]||(t[8]=e("h3",{class:"text-lg font-semibold text-gray-900"},"–®–∞–±–ª–æ–Ω—ã",-1)),e("button",{onClick:t[0]||(t[0]=o=>m.value=!0),class:"btn-primary text-sm"}," + –ù–æ–≤—ã–π —à–∞–±–ª–æ–Ω ")]),l(i)?(r(),p("div",J,[...t[9]||(t[9]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"},null,-1)])])):l(s).length===0?(r(),p("div",R," –ù–µ—Ç —à–∞–±–ª–æ–Ω–æ–≤. –°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—ã–π —à–∞–±–ª–æ–Ω! ")):(r(),p("div",G,[(r(!0),p(B,null,E(l(s),o=>(r(),p("div",{key:o.id,class:"card hover:shadow-md transition-shadow cursor-pointer",onClick:A=>$(o)},[e("div",H,[e("h4",Q,g(o.name),1),e("button",{onClick:h(A=>S(o.id),["stop"]),class:"text-gray-400 hover:text-red-600"}," üóëÔ∏è ",8,W)]),e("div",X,[e("span",{class:L(["px-2 py-0.5 rounded text-xs",o.type==="TASK"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"])},g(o.type==="TASK"?"–ó–∞–¥–∞—á–∞":"–ü—Ä–æ–µ–∫—Ç"),3),o.isPublic?(r(),p("span",Y,"üåç –ü—É–±–ª–∏—á–Ω—ã–π")):v("",!0)])],8,I))),128))])),l(m)?(r(),p("div",{key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:t[7]||(t[7]=o=>m.value=!1)},[e("div",{class:"bg-white rounded-lg p-6 w-full max-w-md",onClick:t[6]||(t[6]=h(()=>{},["stop"]))},[t[13]||(t[13]=e("h3",{class:"text-lg font-semibold mb-4"},"–ù–æ–≤—ã–π —à–∞–±–ª–æ–Ω",-1)),e("form",{onSubmit:h(C,["prevent"])},[f(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>l(n).name=o),type:"text",placeholder:"–ù–∞–∑–≤–∞–Ω–∏–µ",class:"input-base mb-4",required:""},null,512),[[_,l(n).name]]),f(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>l(n).type=o),class:"input-base mb-4"},[...t[10]||(t[10]=[e("option",{value:"TASK"},"–®–∞–±–ª–æ–Ω –∑–∞–¥–∞—á–∏",-1),e("option",{value:"PROJECT"},"–®–∞–±–ª–æ–Ω –ø—Ä–æ–µ–∫—Ç–∞",-1)])],512),[[K,l(n).type]]),f(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=o=>l(n).description=o),placeholder:"–û–ø–∏—Å–∞–Ω–∏–µ",class:"input-base mb-4",rows:"3"},null,512),[[_,l(n).description]]),e("label",Z,[f(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>l(n).isPublic=o),type:"checkbox",class:"rounded"},null,512),[[z,l(n).isPublic]]),t[11]||(t[11]=e("span",{class:"text-sm text-gray-700"},"–ü—É–±–ª–∏—á–Ω—ã–π —à–∞–±–ª–æ–Ω",-1))]),e("div",ee,[e("button",{type:"button",onClick:t[5]||(t[5]=o=>m.value=!1),class:"btn-secondary"},"–û—Ç–º–µ–Ω–∞"),t[12]||(t[12]=e("button",{type:"submit",class:"btn-primary"},"–°–æ–∑–¥–∞—Ç—å",-1))])],32)])])):v("",!0)]))}}),se=Object.assign(te,{__name:"TemplateList"}),ae={class:"min-h-screen bg-gray-50"},oe={class:"bg-white shadow-sm border-b"},ne={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},le={class:"flex justify-between items-center h-16"},ie={class:"flex items-center space-x-4"},re={class:"flex items-center space-x-4"},pe={key:0,class:"text-sm text-gray-600"},de={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},xe=w({__name:"index",setup(a){const{user:s,logout:i}=D(),c=async()=>{await i()};return(d,u)=>{const m=j,n=se;return r(),p("div",ae,[e("header",oe,[e("div",ne,[e("div",le,[e("div",ie,[k(m,{to:"/",class:"text-blue-600 hover:underline"},{default:M(()=>[...u[0]||(u[0]=[N("‚Üê –ù–∞–∑–∞–¥",-1)])]),_:1}),u[1]||(u[1]=e("h1",{class:"text-xl font-bold text-gray-900"},"–®–∞–±–ª–æ–Ω—ã",-1))]),e("div",re,[l(s)?(r(),p("span",pe,g(l(s).name),1)):v("",!0),e("button",{onClick:c,class:"text-sm text-gray-600 hover:text-gray-900"}," –í—ã–π—Ç–∏ ")])])])]),e("main",de,[k(n)])])}}});export{xe as default};
