import{_ as et}from"./_5kmRz0s.js";import{g as st,j as ot,o,c as n,a as e,b as c,w as g,d as x,k as l,t as i,l as r,F as S,r as O,n as E,m as U,p as R,q as C,v as V,s as T,x as A,y as lt,z as $,A as d}from"./BAtAs9mt.js";import{T as nt}from"./BrtjI_6p.js";import{C as at}from"./BkNlCzdX.js";import{u as it}from"./HdmTA0kg.js";import{u as rt}from"./BCkja1yl.js";import{u as dt}from"./D1QnkK4h.js";import"./DlAUqK2U.js";import"./Bws3j-4N.js";const ut={class:"min-h-screen bg-gray-50"},xt={class:"bg-white shadow-sm border-b"},pt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},mt={class:"flex justify-between items-center h-16"},ct={class:"flex space-x-1"},gt={class:"flex items-center space-x-4"},yt={key:0,class:"text-sm text-gray-600"},vt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},bt={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8"},ft={class:"bg-white rounded-lg shadow p-4"},wt={class:"text-2xl font-bold text-gray-900"},ht={class:"bg-white rounded-lg shadow p-4"},_t={class:"text-2xl font-bold text-blue-600"},Ct={class:"bg-white rounded-lg shadow p-4"},Tt={class:"text-2xl font-bold text-green-600"},kt={class:"bg-white rounded-lg shadow p-4"},Dt={class:"text-2xl font-bold text-red-600"},Et={class:"bg-white rounded-lg shadow"},jt={class:"px-6 py-4 border-b border-gray-200 flex justify-between items-center"},It={key:0,class:"px-6 py-8 text-center"},Lt={key:1,class:"px-6 py-8 text-center text-gray-500"},Mt={key:2,class:"divide-y"},Nt={class:"flex items-center space-x-3 flex-1"},Pt=["checked","onChange"],St=["onClick"],Ot={class:"flex items-center gap-2 mb-1 flex-wrap"},Ut=["title"],Rt=["title"],Vt={key:0,class:"text-sm text-gray-500 truncate max-w-md mb-2"},At={class:"flex items-center gap-3 flex-wrap"},$t={key:0,class:"text-red-500 text-xs",title:"–í–∞–∂–Ω–æ–µ"},Bt={key:1,class:"text-orange-500 text-xs",title:"–°—Ä–æ—á–Ω–æ–µ"},Gt={key:2,class:"text-xs text-gray-500",title:"–°—Ä–æ–∫"},Ht={key:3,class:"text-xs text-gray-500",title:"–û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏"},Wt={class:"flex items-center space-x-2"},zt=["onClick"],Ft=["onClick"],qt={class:"mb-4"},Qt=["value"],Jt={class:"mb-4"},Kt={class:"flex justify-end space-x-2"},ie=st({__name:"index",setup(Xt){const{user:j,logout:B}=it(),{tasks:k,pendingTasks:G,completedTasks:H,importantTasks:W,loading:z,fetchTasks:y,createTask:F,updateTask:I,deleteTask:q}=rt(),{projects:L,fetchProjects:Q}=dt(),v=d(!1),u=d(null),p=d(""),b=d(""),f=d("MEDIUM"),w=d(""),h=d(null),_=d(!1);ot(async()=>{await Promise.all([y(),Q()])});const J=async()=>{await B()},K=async a=>{const t=a.status==="COMPLETED"?"NEW":"COMPLETED";await I({id:a.id,status:t}),await y()},M=a=>{u.value=a},X=async a=>{await I(a),u.value=null,await y()},Y=async()=>{p.value.trim()&&(await F({title:p.value,description:b.value,priority:f.value,projectId:w.value||void 0}),p.value="",b.value="",f.value="MEDIUM",w.value="",v.value=!1,await y())},N=a=>{h.value=a,_.value=!0},Z=async()=>{h.value&&(await q(h.value),u.value?.id===h.value&&(u.value=null),h.value=null,_.value=!1,await y())},P=a=>({NEW:"–ù–æ–≤–∞—è",IN_PROGRESS:"–í –ø—Ä–æ—Ü–µ—Å—Å–µ",PAUSED:"–ù–∞ –ø–∞—É–∑–µ",WAITING:"–û–∂–∏–¥–∞–Ω–∏–µ",COMPLETED:"–ó–∞–≤–µ—Ä—à–µ–Ω–æ",CANCELLED:"–û—Ç–º–µ–Ω–µ–Ω–æ",ARCHIVED:"–ê—Ä—Ö–∏–≤"})[a]||a,tt=a=>a?new Date(a).toLocaleDateString("ru-RU",{day:"numeric",month:"short",year:"numeric"}):"";return(a,t)=>{const m=et;return o(),n("div",ut,[e("header",xt,[e("div",pt,[e("div",mt,[t[16]||(t[16]=e("div",{class:"flex items-center"},[e("h1",{class:"text-xl font-bold text-blue-600"},"Enterprise TodoList")],-1)),e("nav",ct,[c(m,{to:"/",class:"px-3 py-2 rounded-md text-sm font-medium text-blue-600 bg-blue-50"},{default:g(()=>[...t[10]||(t[10]=[x(" –ó–∞–¥–∞—á–∏ ",-1)])]),_:1}),c(m,{to:"/projects",class:"px-3 py-2 rounded-md text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100"},{default:g(()=>[...t[11]||(t[11]=[x(" –ü—Ä–æ–µ–∫—Ç—ã ",-1)])]),_:1}),c(m,{to:"/kanban",class:"px-3 py-2 rounded-md text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100"},{default:g(()=>[...t[12]||(t[12]=[x(" –ö–∞–Ω–±–∞–Ω ",-1)])]),_:1}),c(m,{to:"/calendar",class:"px-3 py-2 rounded-md text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100"},{default:g(()=>[...t[13]||(t[13]=[x(" –ö–∞–ª–µ–Ω–¥–∞—Ä—å ",-1)])]),_:1}),c(m,{to:"/analytics",class:"px-3 py-2 rounded-md text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100"},{default:g(()=>[...t[14]||(t[14]=[x(" –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ ",-1)])]),_:1}),c(m,{to:"/pomodoro",class:"px-3 py-2 rounded-md text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100"},{default:g(()=>[...t[15]||(t[15]=[x(" –ü–æ–º–æ–¥–æ—Ä–æ ",-1)])]),_:1})]),e("div",gt,[l(j)?(o(),n("span",yt,i(l(j).name),1)):r("",!0),e("button",{onClick:J,class:"text-sm text-gray-600 hover:text-gray-900"}," –í—ã–π—Ç–∏ ")])])])]),e("main",vt,[t[23]||(t[23]=e("div",{class:"bg-white rounded-lg shadow-md p-6 mb-8"},[e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"}," –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! üëã "),e("p",{class:"text-gray-600"}," –≠—Ç–æ –≤–∞—à–µ —Ä–∞–±–æ—á–µ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∞–º–∏. ")],-1)),e("div",bt,[e("div",ft,[t[17]||(t[17]=e("div",{class:"text-sm text-gray-500"},"–í—Å–µ–≥–æ –∑–∞–¥–∞—á",-1)),e("div",wt,i(l(k).length),1)]),e("div",ht,[t[18]||(t[18]=e("div",{class:"text-sm text-gray-500"},"–í –ø—Ä–æ—Ü–µ—Å—Å–µ",-1)),e("div",_t,i(l(G).length),1)]),e("div",Ct,[t[19]||(t[19]=e("div",{class:"text-sm text-gray-500"},"–ó–∞–≤–µ—Ä—à–µ–Ω–æ",-1)),e("div",Tt,i(l(H).length),1)]),e("div",kt,[t[20]||(t[20]=e("div",{class:"text-sm text-gray-500"},"–í–∞–∂–Ω—ã–µ",-1)),e("div",Dt,i(l(W).length),1)])]),e("div",Et,[e("div",jt,[t[21]||(t[21]=e("h3",{class:"text-lg font-semibold text-gray-900"},"–ó–∞–¥–∞—á–∏",-1)),e("button",{onClick:t[0]||(t[0]=s=>v.value=!0),class:"btn-primary"}," + –ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞ ")]),l(z)?(o(),n("div",It,[...t[22]||(t[22]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)])])):l(k).length===0?(o(),n("div",Lt," –ù–µ—Ç –∑–∞–¥–∞—á. –°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—É—é –∑–∞–¥–∞—á—É! ")):(o(),n("div",Mt,[(o(!0),n(S,null,O(l(k),s=>(o(),n("div",{key:s.id,class:"px-6 py-4 hover:bg-gray-50 flex items-center justify-between"},[e("div",Nt,[e("input",{type:"checkbox",checked:s.status==="COMPLETED",onChange:D=>K(s),class:"h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,40,Pt),e("div",{class:"flex-1 cursor-pointer",onClick:D=>M(s)},[e("div",Ot,[e("p",{class:E(["font-medium",s.status==="COMPLETED"?"line-through text-gray-400":"text-gray-900"])},i(s.title),3),e("span",{class:E(["px-2 py-0.5 text-xs rounded",s.status==="COMPLETED"?"bg-green-100 text-green-800":s.status==="IN_PROGRESS"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"]),title:P(s.status)},i(P(s.status)),11,Ut),s.project?(o(),n("span",{key:0,class:"inline-flex items-center gap-1 px-2 py-0.5 text-xs rounded-full font-medium",style:U({backgroundColor:s.project.color+"20",color:s.project.color||"#3B82F6"}),title:s.project.name},[s.project.color?(o(),n("span",{key:0,class:"w-2 h-2 rounded-full",style:U({backgroundColor:s.project.color})},null,4)):r("",!0),x(" "+i(s.project.name),1)],12,Rt)):r("",!0)]),s.description?(o(),n("p",Vt,i(s.description),1)):r("",!0),e("div",At,[e("span",{class:E(["px-2 py-0.5 text-xs rounded",s.priority==="CRITICAL"?"bg-red-600 text-white":s.priority==="HIGH"?"bg-red-100 text-red-800":s.priority==="MEDIUM"?"bg-yellow-100 text-yellow-800":s.priority==="LOW"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"])},i(s.priority),3),s.isImportant?(o(),n("span",$t,"üî¥ –í–∞–∂–Ω–æ–µ")):r("",!0),s.isUrgent?(o(),n("span",Bt,"‚ö° –°—Ä–æ—á–Ω–æ–µ")):r("",!0),s.dueDate?(o(),n("span",Gt," üìÖ "+i(tt(s.dueDate)),1)):r("",!0),s.estimatedTime?(o(),n("span",Ht," ‚è±Ô∏è "+i(s.estimatedTime)+"–º ",1)):r("",!0)])],8,St)]),e("div",Wt,[e("button",{onClick:D=>M(s),class:"text-gray-400 hover:text-blue-600",title:"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"}," ‚úèÔ∏è ",8,zt),e("button",{onClick:D=>N(s.id),class:"text-gray-400 hover:text-red-600",title:"–£–¥–∞–ª–∏—Ç—å"}," üóëÔ∏è ",8,Ft)])]))),128))]))])]),l(v)?(o(),n("div",{key:0,class:"fixed inset-0 bg-[linear-gradient(145deg,rgba(0,0,0,0.5)_0%,rgb(107,19,188,0.4)_100%)] backdrop-blur-[1px] bg-opacity-50 flex items-center justify-center z-50",onClick:t[7]||(t[7]=s=>v.value=!1)},[e("div",{class:"bg-white rounded-lg p-6 w-full max-w-md",onClick:t[6]||(t[6]=R(()=>{},["stop"]))},[t[29]||(t[29]=e("h3",{class:"text-lg font-semibold mb-4"},"–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞",-1)),e("form",{onSubmit:R(Y,["prevent"])},[C(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>T(p)?p.value=s:null),type:"text",placeholder:"–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏",class:"input-base mb-4",autofocus:""},null,512),[[V,l(p)]]),C(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=s=>T(b)?b.value=s:null),placeholder:"–û–ø–∏—Å–∞–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)",class:"input-base mb-4",rows:"3"},null,512),[[V,l(b)]]),e("div",qt,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"–ü—Ä–æ–µ–∫—Ç",-1)),C(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>T(w)?w.value=s:null),class:"input-base"},[t[24]||(t[24]=e("option",{value:""},"–ë–µ–∑ –ø—Ä–æ–µ–∫—Ç–∞",-1)),(o(!0),n(S,null,O(l(L),s=>(o(),n("option",{key:s.id,value:s.id},i(s.name),9,Qt))),128))],512),[[A,l(w)]])]),e("div",Jt,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç",-1)),C(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>T(f)?f.value=s:null),class:"input-base"},[...t[26]||(t[26]=[lt('<option value="NONE">–ë–µ–∑ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞</option><option value="LOW">–ù–∏–∑–∫–∏–π</option><option value="MEDIUM" selected>–°—Ä–µ–¥–Ω–∏–π</option><option value="HIGH">–í—ã—Å–æ–∫–∏–π</option><option value="CRITICAL">–ö—Ä–∏—Ç–∏—á–Ω—ã–π</option>',5)])],512),[[A,l(f)]])]),e("div",Kt,[e("button",{type:"button",onClick:t[5]||(t[5]=s=>v.value=!1),class:"btn-secondary"}," –û—Ç–º–µ–Ω–∞ "),t[28]||(t[28]=e("button",{type:"submit",class:"btn-primary"},"–°–æ–∑–¥–∞—Ç—å",-1))])],32)])])):r("",!0),l(u)?(o(),$(nt,{key:1,task:l(u),projects:l(L),onClose:t[8]||(t[8]=s=>u.value=null),onSave:X,onDelete:N},null,8,["task","projects"])):r("",!0),l(_)?(o(),$(at,{key:2,title:"–£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É?",message:"–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É –∑–∞–¥–∞—á—É? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.",type:"danger","confirm-text":"–£–¥–∞–ª–∏—Ç—å","cancel-text":"–û—Ç–º–µ–Ω–∞",onConfirm:Z,onCancel:t[9]||(t[9]=s=>_.value=!1)})):r("",!0)])}}});export{ie as default};
