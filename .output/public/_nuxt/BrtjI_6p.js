import{g as U,A as k,o as d,c as r,a as e,t as x,k as o,p as f,q as i,v as m,x as p,F as E,r as T,y,G as g,z as V,l as N,E as S}from"./BAtAs9mt.js";import{C as M}from"./BkNlCzdX.js";import{_ as w}from"./DlAUqK2U.js";const j={class:"text-lg font-semibold mb-4"},L={class:"mb-4"},O={class:"mb-4"},$={class:"mb-4"},A=["value"],F={class:"mb-4"},B={class:"mb-4"},G={class:"mb-4"},W={class:"mb-4 space-y-2"},P={class:"flex items-center"},R={class:"flex items-center"},q={class:"mb-4"},H={class:"flex justify-end space-x-2"},z=U({__name:"TaskForm",props:{task:{},projects:{}},emits:["close","save","delete"],setup(u,{emit:c}){const l=u,b=c,n=k(!1),C=S(()=>!!l.task?.id),a=k({title:l.task?.title||"",description:l.task?.description||"",projectId:l.task?.projectId||"",status:l.task?.status||"NEW",priority:l.task?.priority||"MEDIUM",dueDate:l.task?.dueDate?new Date(l.task.dueDate).toISOString().split("T")[0]:"",isImportant:l.task?.isImportant||!1,isUrgent:l.task?.isUrgent||!1,estimatedTime:l.task?.estimatedTime||0}),I=()=>{b("save",{id:l.task?.id,...a.value})},D=()=>{l.task?.id&&b("delete",l.task.id),n.value=!1};return(v,t)=>(d(),r("div",{class:"task-form-overlay",onClick:t[13]||(t[13]=s=>v.$emit("close"))},[e("div",{class:"task-form-modal",onClick:t[11]||(t[11]=f(()=>{},["stop"]))},[e("h3",j,x(o(C)?"Редактировать задачу":"Новая задача"),1),e("form",{onSubmit:f(I,["prevent"])},[e("div",L,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Название",-1)),i(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>o(a).title=s),type:"text",required:"",class:"input-base",placeholder:"Название задачи"},null,512),[[m,o(a).title]])]),e("div",O,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Описание",-1)),i(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=s=>o(a).description=s),class:"input-base",rows:"3",placeholder:"Описание задачи"},null,512),[[m,o(a).description]])]),e("div",$,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Проект",-1)),i(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>o(a).projectId=s),class:"input-base"},[t[16]||(t[16]=e("option",{value:""},"Без проекта",-1)),(d(!0),r(E,null,T(u.projects,s=>(d(),r("option",{key:s.id,value:s.id},x(s.name),9,A))),128))],512),[[p,o(a).projectId]])]),e("div",F,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Статус",-1)),i(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>o(a).status=s),class:"input-base"},[...t[18]||(t[18]=[y('<option value="NEW" data-v-028bc656>Новая</option><option value="IN_PROGRESS" data-v-028bc656>В процессе</option><option value="PAUSED" data-v-028bc656>На паузе</option><option value="WAITING" data-v-028bc656>Ожидание</option><option value="COMPLETED" data-v-028bc656>Завершено</option><option value="CANCELLED" data-v-028bc656>Отменено</option>',6)])],512),[[p,o(a).status]])]),e("div",B,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Приоритет",-1)),i(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>o(a).priority=s),class:"input-base"},[...t[20]||(t[20]=[y('<option value="NONE" data-v-028bc656>Без приоритета</option><option value="LOW" data-v-028bc656>Низкий</option><option value="MEDIUM" data-v-028bc656>Средний</option><option value="HIGH" data-v-028bc656>Высокий</option><option value="CRITICAL" data-v-028bc656>Критичный</option>',5)])],512),[[p,o(a).priority]])]),e("div",G,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Срок выполнения",-1)),i(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>o(a).dueDate=s),type:"date",class:"input-base"},null,512),[[m,o(a).dueDate]])]),e("div",W,[e("label",P,[i(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>o(a).isImportant=s),type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-blue-600"},null,512),[[g,o(a).isImportant]]),t[23]||(t[23]=e("span",{class:"ml-2 text-sm text-gray-700"},"Важная",-1))]),e("label",R,[i(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>o(a).isUrgent=s),type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-blue-600"},null,512),[[g,o(a).isUrgent]]),t[24]||(t[24]=e("span",{class:"ml-2 text-sm text-gray-700"},"Срочная",-1))])]),e("div",q,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Оценка времени (минуты)",-1)),i(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>o(a).estimatedTime=s),type:"number",min:"0",class:"input-base"},null,512),[[m,o(a).estimatedTime,void 0,{number:!0}]])]),e("div",H,[e("button",{type:"button",onClick:t[9]||(t[9]=s=>v.$emit("close")),class:"btn-secondary"}," Отмена "),e("button",{type:"button",onClick:t[10]||(t[10]=s=>n.value=!0),class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700"}," Удалить "),t[26]||(t[26]=e("button",{type:"submit",class:"btn-primary"}," Сохранить ",-1))])],32)]),o(n)?(d(),V(M,{key:0,title:"Удалить задачу?",message:"Вы уверены, что хотите удалить эту задачу? Это действие нельзя отменить.",type:"danger","confirm-text":"Удалить","cancel-text":"Отмена",onConfirm:D,onCancel:t[12]||(t[12]=s=>n.value=!1)})):N("",!0)]))}}),X=Object.assign(w(z,[["__scopeId","data-v-028bc656"]]),{__name:"TaskForm"});export{X as T};
