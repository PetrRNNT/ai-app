import{_ as v}from"./_5kmRz0s.js";import{_ as w}from"./DU1C0ixR.js";import{u as k}from"./HdmTA0kg.js";import{u as C}from"./D1QnkK4h.js";import{g as P,j as V,c as a,a as e,b as N,w as x,k as l,t as n,l as i,F as A,r as B,z as _,A as F,o,d as j,m as z,n as E}from"./BAtAs9mt.js";const L={class:"min-h-screen bg-gray-50"},S={class:"bg-white shadow-sm border-b"},$={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},D={class:"flex justify-between items-center h-16"},I={class:"flex items-center space-x-4"},T={class:"flex items-center space-x-4"},H={key:0,class:"text-sm text-gray-600"},M={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},R={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},q={class:"flex items-start justify-between mb-3"},G={class:"flex items-center space-x-2"},J={class:"font-semibold text-gray-900"},K={key:0,class:"text-sm text-gray-600 mb-3 line-clamp-2"},O={class:"flex items-center justify-between text-sm text-gray-500"},ee=P({__name:"index",setup(Q){const{user:c,logout:g}=k(),{projects:f,fetchProjects:d,createProject:p}=C(),r=F(!1);V(async()=>{await d()});const y=async m=>{await p(m),await d(),r.value=!1},b=async()=>{await g()};return(m,t)=>{const u=v,h=w;return o(),a("div",L,[e("header",S,[e("div",$,[e("div",D,[e("div",I,[N(u,{to:"/",class:"text-blue-600 hover:underline"},{default:x(()=>[...t[2]||(t[2]=[j("← Назад",-1)])]),_:1}),t[3]||(t[3]=e("h1",{class:"text-xl font-bold text-gray-900"},"Проекты",-1))]),e("div",T,[l(c)?(o(),a("span",H,n(l(c).name),1)):i("",!0),e("button",{onClick:b,class:"text-sm text-gray-600 hover:text-gray-900"}," Выйти ")])])])]),e("main",M,[e("div",R,[e("div",{class:"card border-2 border-dashed border-gray-300 hover:border-blue-500 cursor-pointer flex flex-col items-center justify-center py-12",onClick:t[0]||(t[0]=s=>r.value=!0)},[...t[4]||(t[4]=[e("div",{class:"text-4xl mb-2"},"+",-1),e("span",{class:"text-gray-600 font-medium"},"Новый проект",-1)])]),(o(!0),a(A,null,B(l(f),s=>(o(),_(u,{key:s.id,to:`/projects/${s.id}`,class:"card hover:shadow-lg transition-shadow cursor-pointer"},{default:x(()=>[e("div",q,[e("div",G,[s.color?(o(),a("span",{key:0,class:"w-3 h-3 rounded-full",style:z({backgroundColor:s.color})},null,4)):i("",!0),e("h3",J,n(s.name),1)])]),s.description?(o(),a("p",K,n(s.description),1)):i("",!0),e("div",O,[e("span",null,n(s._count?.tasks||0)+" задач",1),e("span",{class:E(["px-2 py-1 rounded-full text-xs",s.status==="ACTIVE"?"bg-green-100 text-green-800":s.status==="ARCHIVED"?"bg-gray-100 text-gray-800":"bg-blue-100 text-blue-800"])},n(s.status),3)])]),_:2},1032,["to"]))),128))])]),l(r)?(o(),_(h,{key:0,onClose:t[1]||(t[1]=s=>r.value=!1),onSave:y})):i("",!0)])}}});export{ee as default};
